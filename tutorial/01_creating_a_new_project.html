

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. Creating a New Project &mdash; LASIF 0.1.x documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="LASIF 0.1.x documentation" href="../index.html"/>
        <link rel="up" title="Tutorial" href="../tutorial.html"/>
        <link rel="next" title="3. Seismic Events" href="02_seismic_events.html"/>
        <link rel="prev" title="1. Interfaces" href="00_interfaces.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> LASIF
          

          
          </a>

          
            
            
              <div class="version">
                0.1.x
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../prerequisites.html">Installation, Testing &amp; DevInfo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorial.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="00_interfaces.html">1. Interfaces</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2. Creating a New Project</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration-file">2.1. Configuration File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="02_seismic_events.html">3. Seismic Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="03_station_data.html">4. Station Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="04_waveform_data.html">5. Waveform Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="05_download_helpers.html">6. Download Helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="06_data_inspection.html">7. Data Inspection</a></li>
<li class="toctree-l2"><a class="reference internal" href="07_data_validation.html">8. Data Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="08_a_new_iteration.html">9. Defining a New Iteration</a></li>
<li class="toctree-l2"><a class="reference internal" href="09_data_preprocessing.html">10. Data Preprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="10_model_handling.html">11. Earth Model Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="11_generating_input_files.html">12. Generating Input Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="12_synthetic_waveforms.html">13. Synthetics</a></li>
<li class="toctree-l2"><a class="reference internal" href="13_misfits_and_adjoint_sources.html">14. Misfit and Adjoint Source Calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="14_model_update.html">15. Model Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="15_next_iterations.html">16. Next Iterations</a></li>
<li class="toctree-l2"><a class="reference internal" href="16_customizing_lasif.html">17. Customizing LASIF</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webinterface.html">Web Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_doc.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">LASIF</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../tutorial.html">Tutorial</a> &raquo;</li>
        
      <li>2. Creating a New Project</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tutorial/01_creating_a_new_project.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p class="centered">
<strong>Last updated on <em>August 12th 2016</em>.</strong></p><div class="section" id="creating-a-new-project">
<h1>2. Creating a New Project<a class="headerlink" href="#creating-a-new-project" title="Permalink to this headline">¶</a></h1>
<p>The necessary first step, whether for starting a new inversion or migrating an
already existing inversion to <strong>LASIF</strong>, is to create a new project with the
<code class="code docutils literal"><span class="pre">lasif</span> <span class="pre">init_project</span></code> command. In this  tutorial we will work with a
project called <strong>Tutorial</strong>. The <code class="code docutils literal"><span class="pre">lasif</span> <span class="pre">init_project</span></code> command will
create a  new folder in whichever directory the command is executed in.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ lasif init_project Tutorial

Initialized project in:
    /Users/lion/workspace/temp/LASIF_Tutorial/Tutorial
</pre></div>
</div>
<p>This will create the following directory structure. A <strong>LASIF</strong> project is
defined by the files it contains. All information it requires will be
assembled from the available data. In the course of this tutorial you will
learn what piece of data belongs where and how <strong>LASIF</strong> interacts with it.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>Tutorial
├── ADJOINT_SOURCES_AND_WINDOWS
│   ├── ADJOINT_SOURCES
│   └── WINDOWS
├── CACHE
│   ├── config.xml_cache.pickle
│   ├── event_cache.sqlite
│   └── statistics
├── DATA
├── EVENTS
├── FUNCTIONS
│   ├── __init__.py
│   ├── preprocessing_function.py
│   ├── process_synthetics.py
│   ├── source_time_function.py
│   └── window_picking_function.py
├── ITERATIONS
├── KERNELS
├── LOGS
├── MODELS
├── OUTPUT
├── STATIONS
│   ├── RESP
│   ├── SEED
│   └── StationXML
├── SYNTHETICS
├── WAVEFIELDS
└── config.xml
</pre></div>
</div>
<div class="section" id="configuration-file">
<h2>2.1. Configuration File<a class="headerlink" href="#configuration-file" title="Permalink to this headline">¶</a></h2>
<p>Each project stores its configuration values in the <strong>config.xml</strong> file; the
location of this file also determines the root folder of the project. It is
a simple, self-explanatory XML format. Please refer to the comments in the
XML file to infer the meaning of the different settings. Immediately after the
project has been initialized, it will resemble the following:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;</span>
<span class="nt">&lt;lasif_project&gt;</span>
  <span class="nt">&lt;name&gt;</span>Tutorial<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;description&gt;&lt;/description&gt;</span>
  <span class="nt">&lt;download_settings&gt;</span>
    <span class="nt">&lt;seconds_before_event&gt;</span>300<span class="nt">&lt;/seconds_before_event&gt;</span>
    <span class="nt">&lt;seconds_after_event&gt;</span>3600<span class="nt">&lt;/seconds_after_event&gt;</span>
    <span class="nt">&lt;interstation_distance_in_m&gt;</span>1000.0<span class="nt">&lt;/interstation_distance_in_m&gt;</span>
    <span class="nt">&lt;channel_priorities&gt;</span>
      <span class="nt">&lt;priority&gt;</span>BH[Z,N,E]<span class="nt">&lt;/priority&gt;</span>
      <span class="nt">&lt;priority&gt;</span>LH[Z,N,E]<span class="nt">&lt;/priority&gt;</span>
      <span class="nt">&lt;priority&gt;</span>HH[Z,N,E]<span class="nt">&lt;/priority&gt;</span>
      <span class="nt">&lt;priority&gt;</span>EH[Z,N,E]<span class="nt">&lt;/priority&gt;</span>
      <span class="nt">&lt;priority&gt;</span>MH[Z,N,E]<span class="nt">&lt;/priority&gt;</span>
    <span class="nt">&lt;/channel_priorities&gt;</span>
    <span class="nt">&lt;location_priorities&gt;</span>
      <span class="nt">&lt;priority&gt;&lt;/priority&gt;</span>
      <span class="nt">&lt;priority&gt;</span>00<span class="nt">&lt;/priority&gt;</span>
      <span class="nt">&lt;priority&gt;</span>10<span class="nt">&lt;/priority&gt;</span>
      <span class="nt">&lt;priority&gt;</span>20<span class="nt">&lt;/priority&gt;</span>
      <span class="nt">&lt;priority&gt;</span>01<span class="nt">&lt;/priority&gt;</span>
      <span class="nt">&lt;priority&gt;</span>02<span class="nt">&lt;/priority&gt;</span>
    <span class="nt">&lt;/location_priorities&gt;</span>
  <span class="nt">&lt;/download_settings&gt;</span>
  <span class="nt">&lt;domain&gt;</span>
    <span class="nt">&lt;global&gt;</span>false<span class="nt">&lt;/global&gt;</span>
    <span class="nt">&lt;domain_bounds&gt;</span>
      <span class="nt">&lt;minimum_longitude&gt;</span>-20<span class="nt">&lt;/minimum_longitude&gt;</span>
      <span class="nt">&lt;maximum_longitude&gt;</span>20<span class="nt">&lt;/maximum_longitude&gt;</span>
      <span class="nt">&lt;minimum_latitude&gt;</span>-20<span class="nt">&lt;/minimum_latitude&gt;</span>
      <span class="nt">&lt;maximum_latitude&gt;</span>20<span class="nt">&lt;/maximum_latitude&gt;</span>
      <span class="nt">&lt;minimum_depth_in_km&gt;</span>0.0<span class="nt">&lt;/minimum_depth_in_km&gt;</span>
      <span class="nt">&lt;maximum_depth_in_km&gt;</span>200.0<span class="nt">&lt;/maximum_depth_in_km&gt;</span>
      <span class="nt">&lt;boundary_width_in_degree&gt;</span>3.0<span class="nt">&lt;/boundary_width_in_degree&gt;</span>
    <span class="nt">&lt;/domain_bounds&gt;</span>
    <span class="nt">&lt;domain_rotation&gt;</span>
      <span class="nt">&lt;rotation_axis_x&gt;</span>1.0<span class="nt">&lt;/rotation_axis_x&gt;</span>
      <span class="nt">&lt;rotation_axis_y&gt;</span>1.0<span class="nt">&lt;/rotation_axis_y&gt;</span>
      <span class="nt">&lt;rotation_axis_z&gt;</span>1.0<span class="nt">&lt;/rotation_axis_z&gt;</span>
      <span class="nt">&lt;rotation_angle_in_degree&gt;</span>-45.0<span class="nt">&lt;/rotation_angle_in_degree&gt;</span>
    <span class="nt">&lt;/domain_rotation&gt;</span>
  <span class="nt">&lt;/domain&gt;</span>
  <span class="nt">&lt;misc_settings&gt;</span>
    <span class="nt">&lt;time_frequency_adjoint_source_criterion&gt;</span>
        25.0
    <span class="nt">&lt;/time_frequency_adjoint_source_criterion&gt;</span>
  <span class="nt">&lt;/misc_settings&gt;</span>
<span class="nt">&lt;/lasif_project&gt;</span>
</pre></div>
</div>
<p>The nature of SES3D’s coordinate system has the effect that simulation is most
efficient in equatorial regions. Thus it is often advantageous to rotate
the frame of reference so that the simulation happens close to the equator.
A one chunk simulation with SPECFEM3D GLOBE does not suffer from this limitation,
but a domain can still only be specified by minimum and maximum extents as it
works with spherical sections.
<strong>LASIF</strong> first defines the simulation domain; the actual simulation happens
there (only when using SES3D; SPECFEM3D GLOBE directly simulates in the
rotated domain). Optional rotation parameters define the physical location of
the domain. The coordinate system for the rotation parameters is described in
<a class="reference internal" href="../rotations.html#module-lasif.rotations" title="lasif.rotations"><code class="xref py py-mod docutils literal"><span class="pre">lasif.rotations</span></code></a>.  You will have to edit the <code class="docutils literal"><span class="pre">config.xml</span></code> file to
adjust it to your region of interest.</p>
<p><strong>LASIF</strong> handles all rotations necessary so the user never needs to worry
about these. Just keep in mind to always keep any data (real waveforms, station
metadata and events) in coordinates that correspond to the physical domain and
all synthetic waveforms in coordinates that correspond to the simulation
domain.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">A one chunk simulation in SPECFEM3D GLOBE is not exactly identical with the
domain definition in LASIF. A SES3D (and LASIF) domain is defined in
geographical coordinates whereas a cubed sphere chunk uses great circles on
all boundaries. This is not a big limitation - just keep in mind that the
domain in SPECFEM is a bit smaller at the corners than the LASIF domain. If
this becomes an issue, let us know and we’ll add some more logic to LASIF.</p>
</div>
<p>For this tutorial we are going to work in a rotated domain across Europe.
Please change the <code class="docutils literal"><span class="pre">config.xml</span></code> file to reflect the following domain
settings.</p>
<ul class="simple">
<li>Latitude: <code class="docutils literal"><span class="pre">-10.0°</span> <span class="pre">-</span> <span class="pre">10.0°</span></code></li>
<li>Longitude: <code class="docutils literal"><span class="pre">-10.0°</span> <span class="pre">-</span> <span class="pre">10.0°</span></code></li>
<li>Depth: <code class="docutils literal"><span class="pre">0</span> <span class="pre">km</span> <span class="pre">-</span> <span class="pre">471</span> <span class="pre">km</span></code></li>
<li>Boundary width in degree: <code class="docutils literal"><span class="pre">2.5°</span></code></li>
<li>Rotation axis: <code class="docutils literal"><span class="pre">1.0,</span> <span class="pre">1.0,</span> <span class="pre">0.2</span></code></li>
<li>Rotation angle: <code class="docutils literal"><span class="pre">-65.0°</span></code></li>
</ul>
<p>In general, one should only work with data not affected by the boundary
conditions. SES3D utilizes perfectly matched layers boundary conditions (PML).
It is not advisable to use data that traverses these layers. SES3D defaults
to two layers but more are possible. For this tutorial we will only consider
data which is at least three elements away from the border in a an attempt
to avoid unphysical influences of the boundary conditions. This amounts to
<code class="docutils literal"><span class="pre">2.5°</span></code>.</p>
<p>At any point you can have a look at the defined domain with</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ lasif plot_domain
</pre></div>
</div>
<p>This will open a window showing the location of the physical domain and the
simulation domain. The inner contour shows the domain minus the previously
defined boundary width.</p>
<p>(<a class="reference external" href="../tutorial/01_creating_a_new_project-1.py">Source code</a>, <a class="reference external" href="../tutorial/01_creating_a_new_project-1.png">png</a>, <a class="reference external" href="../tutorial/01_creating_a_new_project-1.hires.png">hires.png</a>, <a class="reference external" href="../tutorial/01_creating_a_new_project-1.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/01_creating_a_new_project-1.png" src="../_images/01_creating_a_new_project-1.png" />
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The map projection and zoom should automatically adjust so that it is suitable
for the dimensions and location of the chosen domain. If this is not the
case, please file an issue on the project’s Github page.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="02_seismic_events.html" class="btn btn-neutral float-right" title="3. Seismic Events" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="00_interfaces.html" class="btn btn-neutral" title="1. Interfaces" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Lion Krischer &amp; Andreas Fichtner.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1.x',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>